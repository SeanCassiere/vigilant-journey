import{H3Event as $,getRequestURL as ie,getResponseHeaders as ue,getRequestWebStream as le,eventHandler as de}from"h3";import{AsyncLocalStorage as fe}from"node:async_hooks";import{isPlainArray as he,isPlainObject as W,defer as me,useRouter as pe,ScriptOnce as D,pick as ye,createControlledPromise as ge,RouterProvider as be,createMemoryHistory as we,createRootRoute as _e,Outlet as xe,createFileRoute as Se,lazyFn as ve,lazyRouteComponent as Re,createRouter as Ce}from"@tanstack/react-router";import{jsxs as F,Fragment as J,jsx as l}from"react/jsx-runtime";import*as T from"react";import{createContext as Ee}from"react";import{Transform as Te,PassThrough as He}from"node:stream";import R from"react-dom/server";class b{constructor(){this.cache=new Map}static create(){return b.instance||(b.instance=new b),b.instance}createContext(t,r){const n=Ee(r);return this.cache.set(t,n),n}get(t,r){return this.cache.get(t)||this.createContext(t,r)}}const Ae=b.create(),$e=Ae;function je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const K={},ke=K.hasOwnProperty,G=(e,t)=>{for(const r in e)ke.call(e,r)&&t(r,e[r])},De=(e,t)=>(t&&G(t,(r,n)=>{e[r]=n}),e),Fe=(e,t)=>{const r=e.length;let n=-1;for(;++n<r;)t(e[n])},C=e=>"\\u"+("0000"+e).slice(-4),w=(e,t)=>{let r=e.toString(16);return t?r:r.toUpperCase()},x=K.toString,Pe=Array.isArray,Le=e=>typeof Buffer=="function"&&Buffer.isBuffer(e),ze=e=>x.call(e)=="[object Object]",Me=e=>typeof e=="string"||x.call(e)=="[object String]",qe=e=>typeof e=="number"||x.call(e)=="[object Number]",Ie=e=>typeof e=="function",Oe=e=>x.call(e)=="[object Map]",Ne=e=>x.call(e)=="[object Set]",Be={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Ue=/[\\\b\f\n\r\t]/,We=/[0-9]/,Je=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ke=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,Ge=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,y=(e,t)=>{const r=()=>{d=i,++t.indentLevel,i=t.indent.repeat(t.indentLevel)},n={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},a=t&&t.json;a&&(n.quotes="double",n.wrap=!0),t=De(n,t),t.quotes!="single"&&t.quotes!="double"&&t.quotes!="backtick"&&(t.quotes="single");const o=t.quotes=="double"?'"':t.quotes=="backtick"?"`":"'",s=t.compact,c=t.lowercaseHex;let i=t.indent.repeat(t.indentLevel),d="";const m=t.__inline1__,p=t.__inline2__,f=s?"":`
`;let u,S=!0;const ee=t.numbers=="binary",te=t.numbers=="octal",re=t.numbers=="decimal",ne=t.numbers=="hexadecimal";if(a&&e&&Ie(e.toJSON)&&(e=e.toJSON()),!Me(e)){if(Oe(e))return e.size==0?"new Map()":(s||(t.__inline1__=!0,t.__inline2__=!1),"new Map("+y(Array.from(e),t)+")");if(Ne(e))return e.size==0?"new Set()":"new Set("+y(Array.from(e),t)+")";if(Le(e))return e.length==0?"Buffer.from([])":"Buffer.from("+y(Array.from(e),t)+")";if(Pe(e))return u=[],t.wrap=!0,m&&(t.__inline1__=!1,t.__inline2__=!0),p||r(),Fe(e,h=>{S=!1,p&&(t.__inline2__=!1),u.push((s||p?"":i)+y(h,t))}),S?"[]":p?"["+u.join(", ")+"]":"["+f+u.join(","+f)+f+(s?"":d)+"]";if(qe(e)){if(a)return JSON.stringify(e);if(re)return String(e);if(ne){let h=e.toString(16);return c||(h=h.toUpperCase()),"0x"+h}if(ee)return"0b"+e.toString(2);if(te)return"0o"+e.toString(8)}else return ze(e)?(u=[],t.wrap=!0,r(),G(e,(h,g)=>{S=!1,u.push((s?"":i)+y(h,t)+":"+(s?"":" ")+y(g,t))}),S?"{}":"{"+f+u.join(","+f)+f+(s?"":d)+"}"):a?JSON.stringify(e)||"null":String(e)}const se=t.escapeEverything?Ke:Ge;return u=e.replace(se,(h,g,L,v,ae,oe)=>{if(g){if(t.minimal)return g;const z=g.charCodeAt(0),M=g.charCodeAt(1);if(t.es6){const ce=(z-55296)*1024+M-56320+65536;return"\\u{"+w(ce,c)+"}"}return C(w(z,c))+C(w(M,c))}if(L)return C(w(L.charCodeAt(0),c));if(h=="\0"&&!a&&!We.test(oe.charAt(ae+1)))return"\\0";if(v)return v==o||t.escapeEverything?"\\"+v:v;if(Ue.test(h))return Be[h];if(t.minimal&&!Je.test(h))return h;const A=w(h.charCodeAt(0),c);return a||A.length>2?C(A):"\\x"+("00"+A).slice(-2)}),o=="`"&&(u=u.replace(/\$\{/g,"\\${")),t.isScriptContext&&(u=u.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,a?"\\u003C!--":"\\x3C!--")),t.wrap&&(u=o+u+o),u};y.version="3.0.2";var Ve=y;const H=je(Ve);var Ze="Invariant failed";function Qe(e,t){if(!e)throw new Error(Ze)}function Xe(e,t,r){if(!r.router.isServer)return t;r.match.extracted=r.match.extracted||[];const n=r.match.extracted;return j(t,(o,s)=>{const c=o instanceof ReadableStream?"stream":o instanceof Promise?"promise":void 0;if(c){const i={dataType:e,type:c,path:s,id:n.length,value:o,matchIndex:r.match.index};if(n.push(i),c==="stream"){const[d,m]=o.tee();return i.streamState=nt({stream:m}),d}else me(o)}return o})}function Ye(e){const t=pe(),r=t.state.matches[e.matchIndex];if(!t.isServer)return null;const n=r.extracted,[a,o]=["__beforeLoadContext","loaderData"].map(s=>n?n.reduce((c,i)=>i.dataType!==s?k(c,["temp",...i.path],void 0):c,{temp:r[s]}).temp:r[s]);return F(J,{children:[a!==void 0||o!==void 0||n?.length?l(D,{children:`__TSR__.matches[${e.matchIndex}] = ${H({__beforeLoadContext:t.options.transformer.stringify(a),loaderData:t.options.transformer.stringify(o),extracted:n?Object.fromEntries(n.map(s=>[s.id,ye(s,["type","path"])])):{}},{isScriptContext:!0,wrap:!0,json:!0})}; __TSR__.initMatch(${e.matchIndex})`}):null,n?n.map((s,c)=>s.type==="stream"?l(rt,{entry:s},s.id):l(et,{entry:s},s.id)):null]})}function j(e,t,r=[]){if(he(e))return e.map((a,o)=>j(a,t,[...r,`${o}`]));if(W(e)){const a={};for(const o in e)a[o]=j(e[o],t,[...r,o]);return a}const n=t(e,r);return n!==e?n:e}function et({entry:e}){return l("div",{className:"tsr-once",children:l(T.Suspense,{fallback:null,children:l(tt,{entry:e})})})}function tt({entry:e}){if(e.value.status==="pending")throw e.value;return l(D,{children:`__TSR__.matches[${e.matchIndex}].extracted[${e.id}].resolve(${H(e.value.data,{isScriptContext:!0,wrap:!0,json:!0})})`})}function rt({entry:e}){return Qe(e.streamState),l(V,{streamState:e.streamState,children:t=>l(D,{children:t?`__TSR__.matches[${e.matchIndex}].extracted[${e.id}].value.controller.enqueue(new TextEncoder().encode(${H(t.toString(),{isScriptContext:!0,wrap:!0,json:!0})}))`:`__TSR__.matches[${e.matchIndex}].extracted[${e.id}].value.controller.close()`})})}function nt({stream:e}){const t={promises:[]},r=e.getReader(),n=a=>(t.promises[a]=ge(),r.read().then(({done:o,value:s})=>{if(o){t.promises[a].resolve(null),r.releaseLock();return}return t.promises[a].resolve(s),n(a+1)}));return n(0).catch(a=>{console.error("stream read error",a)}),t}function V({streamState:e,children:t,__index:r=0}){const n=e.promises[r];if(!n)return null;if(n.status==="pending")throw n;const a=n.value;return F(J,{children:[t(a),l("div",{className:"tsr-once",children:l(T.Suspense,{fallback:null,children:l(V,{streamState:e,__index:r+1,children:t})})})]})}function k(e,t,r){if(t.length===0)return r;const[n,...a]=t;return Array.isArray(e)?e.map((o,s)=>s===Number(n)?k(o,a,r):o):W(e)?{...e,[n]:k(e[n],a,r)}:e}function q(e){e.router.AfterEachMatch=Ye,e.router.serializer=n=>H(n,{isScriptContext:!0,wrap:!0,json:!0});const t=$e.get("TanStackRouterHydrationContext",{}),r=T.useMemo(()=>{var n,a;return{router:e.router.dehydrate(),payload:(a=(n=e.router.options).dehydrate)==null?void 0:a.call(n)}},[e.router]);return l(t.Provider,{value:r,children:l(be,{router:e.router})})}function st(e={}){let t,r=!1;const n=s=>{if(t&&t!==s)throw new Error("Context conflict")};let a;if(e.asyncContext){const s=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;s?a=new s:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const o=()=>{if(a&&t===void 0){const s=a.getStore();if(s!==void 0)return s}return t};return{use:()=>{const s=o();if(s===void 0)throw new Error("Context is not available");return s},tryUse:()=>o(),set:(s,c)=>{c||n(s),t=s,r=!0},unset:()=>{t=void 0,r=!1},call:(s,c)=>{n(s),t=s;try{return a?a.run(s,c):c()}finally{r||(t=void 0)}},async callAsync(s,c){t=s;const i=()=>{t=s},d=()=>t===s?i:void 0;N.add(d);try{const m=a?a.run(s,c):c();return r||(t=void 0),await m}finally{N.delete(d)}}}}function at(e={}){const t={};return{get(r,n={}){return t[r]||(t[r]=st({...e,...n})),t[r],t[r]}}}const E=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},I="__unctx__",ot=E[I]||(E[I]=at()),ct=(e,t={})=>ot.get(e,t),O="__unctx_async_handlers__",N=E[O]||(E[O]=new Set);function it(e){let t;const r=Q(e),n={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(r,{...n,body:e.node.req.body}):new Request(r,{...n,get body(){return t||(t=ht(e),t)}})}function ut(e){return e.web??={request:it(e),url:Q(e)},e.web.request}function lt(){return pt()}const Z=Symbol("$HTTPEvent");function dt(e){return typeof e=="object"&&(e instanceof $||e?.[Z]instanceof $||e?.__is_event__===!0)}function P(e){return function(...t){let r=t[0];if(dt(r))t[0]=r instanceof $||r.__is_event__?r:r[Z];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(r=lt(),!r)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(r)}return e(...t)}}const Q=P(ie),ft=P(ue),ht=P(le);function mt(){return ct("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:fe})}function pt(){return mt().use().event}function yt(e){return e instanceof Headers?new Headers(e):Array.isArray(e)?new Headers(e):typeof e=="object"?new Headers(e):new Headers}function B(...e){return e.reduce((t,r)=>{const n=yt(r);for(const[a,o]of n.entries())t.set(a,o);return t},new Headers)}const gt="server-fn-return-type",bt="server-fn-payload-type";function wt({createRouter:e,getRouterManifest:t}){return r=>de(async n=>{const a=ut(n),o=new URL(a.url),s=o.href.replace(o.origin,""),c=we({initialEntries:[s]}),i=e();i.serializeLoaderData=Xe,t&&(i.manifest=t()),i.update({history:c}),await i.load();const d=_t({event:n,router:i});return await r({request:a,router:i,responseHeaders:d})})}function _t(e){e.event.__tsrHeadersSent=!0;let t=B(ft(e.event),{"Content-Type":"text/html; charset=UTF-8"},...e.router.state.matches.map(n=>n.headers));const{redirect:r}=e.router.state;return r&&(t=B(t,r.headers,{Location:r.href})),[gt,bt].forEach(n=>{t.delete(n)}),t}var xt=" daum[ /]| deusu/| yadirectfetcher|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|@[a-z][\\w-]+\\.|\\(\\)|\\.com\\b|\\btime/|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\d+\\b|^\\w*search\\b|^\\w+/[\\w\\(\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/5\\.0\\s[a-z\\.-]+$|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^offline|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^valid|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adscanner/|analyzer|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|firephp|functionize|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|infrawatch|insight|inspect|iplabel|ips-agent|java(?!;)|jsjcw_scanner|library|linkcheck|mail\\.ru/|manager|measure|neustar wpm|node|nutch|offbyone|optimize|pageburst|pagespeed|parser|perl|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reputation|resolver|retriever|rexx;|rigor|rss\\b|scanner\\.|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|trace|transcoder|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|zgrab",St=/bot|crawl|http|lighthouse|scan|search|spider/i,_;function vt(){if(_ instanceof RegExp)return _;try{_=new RegExp(xt,"i")}catch{_=St}return _}function U(e){return!!e&&vt().test(e)}function Rt(e){const t=X(()=>e.injectedHtml.map(r=>r()).join(""));return new Te({transform(r,n,a){t.transform(r,this.push.bind(this)).then(()=>a()).catch(o=>a(o))},flush(r){t.flush(this.push.bind(this)).then(()=>r()).catch(n=>r(n))}})}function Ct(e){const t=X(()=>e.injectedHtml.map(n=>n()).join("")),r=new TextEncoder;return new TransformStream({transform(n,a){return t.transform(n,o=>(a.enqueue(r.encode(o)),!0))},flush(n){return t.flush(a=>(n.enqueue(a),!0))}})}const Et=/(<body)/,Tt=/(<\/body>)/,Ht=/(<\/html>)/,At=/(<\/[a-zA-Z][\w:.-]*?>)/g,$t=new TextDecoder;function X(e){let t=!1,r="",n="";return{async transform(a,o){const s=r+$t.decode(a),c=s.match(Et),i=s.match(Tt),d=s.match(Ht);try{if(c&&(t=!0),!t){o(s),r="";return}const m=e();if(i&&d&&i.index<d.index){const p=i.index+i[0].length,f=d.index+d[0].length,u=s.slice(0,p)+m+s.slice(p,f)+s.slice(f);o(u),r=""}else{let p,f=0;for(;(p=At.exec(s))!==null;)f=p.index+p[0].length;if(f>0){const u=s.slice(0,f)+m+n;o(u),r=s.slice(f)}else r=s,n+=m}}catch(m){throw console.error(m),m}},async flush(a){r&&a(r)}}}const jt=async({request:e,router:t,responseHeaders:r})=>{if(typeof R.renderToReadableStream=="function"){const n=await R.renderToReadableStream(l(q,{router:t}),{signal:e.signal,onError(s,c){console.error(s,c)}});U(e.headers.get("User-Agent"))&&await n.allReady;const o=[Ct(t)].reduce((s,c)=>s.pipeThrough(c),n);return new Response(o,{status:t.state.statusCode,headers:r})}if(typeof R.renderToPipeableStream=="function"){const n=new He,a=R.renderToPipeableStream(l(q,{router:t}),{...U(e.headers.get("User-Agent"))?{onAllReady(){a.pipe(n)}}:{onShellReady(){a.pipe(n)}},onShellError(c){throw c}}),s=[Rt(t)].reduce((c,i)=>c.pipe(i),n);return new Response(s,{status:t.state.statusCode,headers:r})}throw new Error("No renderToReadableStream or renderToPipeableStream found in react-dom/server. Ensure you are using a version of react-dom that supports streaming.")},kt=()=>({routes:{__root__:{filePath:"__root.tsx",children:["/"],preloads:["/_build/assets/client-lxKthFjb.js","/_build/assets/client-NT2iWb7E.js"]},"/":{filePath:"index.tsx"}}});function Dt(e){return globalThis.MANIFEST[e]}function Ft(){const e=kt(),t=e.routes.__root__=e.routes.__root__||{};t.assets=t.assets||[];const r=Dt("client");return t.assets.push({tag:"script",attrs:{src:r.inputs[r.handler]?.output.path,type:"module",async:!0,suppressHydrationWarning:!0}}),e}function Pt(){const e=Ft();return{...e,routes:Object.fromEntries(Object.entries(e.routes).map(([t,r])=>{const{preloads:n,assets:a}=r;return[t,{preloads:n,assets:a}]}))}}const Y=_e({component:()=>F(T.Fragment,{children:[l("div",{children:'Hello "__root"!'}),l("hr",{}),l(xe,{})]})}),Lt=()=>import("./index-CMv6gFOn.js"),zt=()=>import("./index-CMv6gFOn.js"),Mt=Se("/")({loader:ve(zt,"loader"),component:Re(Lt,"component")}),qt=Mt.update({path:"/",getParentRoute:()=>Y}),It=Y.addChildren({IndexRoute:qt});function Ot(){return Ce({routeTree:It})}const Zt=wt({createRouter:Ot,getRouterManifest:Pt})(jt);export{Mt as R,Zt as h};
